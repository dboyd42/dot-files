#          _____ __  __ _   ___  __
#          |_   _|  \/  | | | \ \/ /
#            | | | |\/| | | | |\  /
#            | | | |  | | |_| |/  \
#            |_| |_|  |_|\___//_/\_\
#
#  ################# Key ##################
#  #        SHORTHAND | LONGHAND          #
#  #    --------------+------------------ #
#  #              set | set-option        #
#  #             setw | set-window-option #
#  #               -g | global            #
#  #               -r | repeatable        #
#  ########################################

########################
### General Settings ###
########################

# Set true color
set -sa terminal-overrides ",xterm*:Tc" #  24-bit color

# Set the delay between prefix and command
set -g escape-time 1

# Set mouse support -- allows for:
set -g mouse on      #  jump support when clicking on windows & panes
                     #    - including, on TMUX's statusline's "tabs"
                     #  scrolling (including, buff history)

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Open panes in current directory
bind '"' split-window -v -c "#{pane_current-path}"
bind % split-window -h -c "#{pane_current-path}"

# Set prefex
# unbind C-b
# set -g prefix C-Space         # ugh, C-b is ingrained in me!
# bind Space-Space send-prefix

# Ensure that Ctrl-b is sent to other apps
bind C-b send-prefix

### Set vi-mode ###
setw -g mode-keys vi
#### Keybindings for Vim-like copy/paste
bind-key -T copy-mode-vi v send-keys -X begin-selection
# Toggle b/t selection-modes(line, rectangle)
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Move between panes with PREFIX Ctrl+h,j,k,l (Hold Ctrl for repeatability)
bind -r C-h select-pane -L
bind -r C-j select-pane -D
bind -r C-k select-pane -U
bind -r C-l select-pane -R

# Resize panes  --Hold shift for repeatability
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

### Misc. ###
# Reload the TMUX conf file & display confirmation
bind -r C-r source-file $HOME/.config/tmux/tmux.conf \; display "Reloaded!"

#######################
### List of plugins ###
#######################
# To Install/Update Plugins: <prefix>I
set -g @plugin 'tmux-plugins/tpm'           # TPM itself
set -g @plugin 'tmux-plugins/tmux-sensible' # Preset "sensible" key-bindings
# set -g @catppuccin_flavour 'latte'          # light variant
# set -g @catppuccin_flavour 'mocha'          # dark variant (default)
# set -g @catppuccin_flavour 'frappe'         # dark-grey variant
# set -g @catppuccin_flavour 'macchiato'      # dark-grey variant
set -g @plugin 'catppuccin/tmux'            # TMUX theme
# set -g @plugin 'dreamsofcode-io/catppuccin-tmux' # TMUX theme
set -g @plugin 'tmux-plugins/tmux-yank' # Copy to system clipboard via 'y' key

# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'github_username/plugin_name#branch'
# set -g @plugin 'git@github.com:user/plugin'
# set -g @plugin 'git@bitbucket.com:user/plugin'

# Initialize TMUX plugin manager
#  (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

#####################
### Plugin Issues ###
#####################

## set -g @plugin 'christoomey/vim-tmux-navigator' # Self-explanatory
# Issue: Overrides previously set keybindings by bypassing <prefix> key
# Resolution: (a) Unbind then rebind
#             (b) Use my old tmux config as this plugin is basically the same
